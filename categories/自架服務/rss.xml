<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>自架服務 on 筆記Zone</title>
        <link>https://zonego.tw/categories/%E8%87%AA%E6%9E%B6%E6%9C%8D%E5%8B%99/</link>
        <description>Recent content in 自架服務 on 筆記Zone</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-tw</language>
        <lastBuildDate>Tue, 21 Feb 2023 19:42:28 +0800</lastBuildDate><atom:link href="https://zonego.tw/categories/%E8%87%AA%E6%9E%B6%E6%9C%8D%E5%8B%99/rss.xml" rel="self" type="application/rss+xml" /><item>
        <title>AdGuard Home 擋廣告工具</title>
        <link>https://zonego.tw/post/adguardhome/</link>
        <pubDate>Tue, 21 Feb 2023 19:42:28 +0800</pubDate>
        
        <guid>https://zonego.tw/post/adguardhome/</guid>
        <description>&lt;img src="https://zonego.tw/post/adguardhome/adguardhome.jpg" alt="Featured image of post AdGuard Home 擋廣告工具" /&gt;&lt;p&gt;一般檔廣告大家都會使用瀏覽器插，例如 AD Bolck。這邊推薦可以從 DNS 下手&lt;/p&gt;
&lt;h2 id=&#34;dns-檔廣告原理&#34;&gt;&lt;a href=&#34;#dns-%e6%aa%94%e5%bb%a3%e5%91%8a%e5%8e%9f%e7%90%86&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;DNS 檔廣告原理
&lt;/h2&gt;&lt;h3 id=&#34;dns原理簡介&#34;&gt;&lt;a href=&#34;#dns%e5%8e%9f%e7%90%86%e7%b0%a1%e4%bb%8b&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;DNS原理簡介
&lt;/h3&gt;&lt;p&gt;一般瀏覽網站時，我們常會使用網域名稱 domain，代替只有數字的 IP 作為連線地址&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/adguardhome/DNS.png&#34;
	width=&#34;544&#34;
	height=&#34;274&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/DNS_hu_d1bcb74afe03240c.png 480w, https://zonego.tw/post/adguardhome/DNS_hu_945e4c04303a82c2.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;DNS&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;198&#34;
		data-flex-basis=&#34;476px&#34;
	
&gt;&lt;br&gt;
舉個例子🌰，要去 google 首頁 &lt;a class=&#34;link&#34; href=&#34;https://www.google.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.google.com&lt;/a&gt; ，其中 &lt;a class=&#34;link&#34; href=&#34;https://www.google.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;www.google.com&lt;/a&gt; 就是網域名稱&lt;br&gt;
瀏覽器會先去 DNS 伺服器用網域名稱查出 Google 的伺服器 IP&lt;br&gt;
知道 IP 後才能連到 Google 的伺服器請求資料&lt;/p&gt;
&lt;p&gt;在這中間，Google 也會順便將要顯示的廣告網址一起送回來&lt;br&gt;
瀏覽器再照之前的流程，去廣告商的伺服器去抓廣告回來顯示&lt;/p&gt;
&lt;p&gt;想知道更多 DNS 詳細機制，可以參考 &lt;a class=&#34;link&#34; href=&#34;https://www.cloudflare.com/zh-tw/learning/dns/what-is-dns/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Coudflare 寫的說明&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;dns沉洞dns-sinkhole&#34;&gt;&lt;a href=&#34;#dns%e6%b2%89%e6%b4%9edns-sinkhole&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;DNS沉洞（DNS sinkhole）
&lt;/h3&gt;&lt;p&gt;看完原理後，反過來說，只要 DNS 伺服器不能正常把網域名稱換成 IP&lt;br&gt;
網路就像斷了，只剩直接給 IP 的方式還能連線&lt;/p&gt;
&lt;p&gt;所以只要在 DNS 伺服器動手腳，把廣告的網址設定成錯誤的IP(例如：127.0.0.1)&lt;br&gt;
廣告就無法正常顯示&lt;/p&gt;
&lt;p&gt;這種作法就叫做 &lt;code&gt;DNS沉洞&lt;/code&gt;（DNS sinkhole）&lt;/p&gt;
&lt;p&gt;有幾套可以自己架的 DNS 伺服器軟體可以達到這種效果，如 PI-Hole、 AdGuard Home&lt;br&gt;
這邊主要介紹 AdGuard Home&lt;/p&gt;
&lt;p&gt;&lt;del&gt;PI-Hole 改天在寫&lt;/del&gt;&lt;/p&gt;
&lt;h2 id=&#34;adguard-home&#34;&gt;&lt;a href=&#34;#adguard-home&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;AdGuard Home
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://adguard.com/zh_tw/adguard-home/overview.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;AdGuard Home 官方網站&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/AdguardTeam/AdGuardHome&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;AdGuard Home GitHub repo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;附上 AdGuard Home 提供的功能比對表&amp;hellip;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;功能&lt;/th&gt;
          &lt;th&gt;AdGuard Home&lt;/th&gt;
          &lt;th&gt;Pi-Hole&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;阻擋廣告與追蹤器&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;自訂阻擋清單&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;內建 DHCP server 功能&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;HTTPS 管理介面&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌ 需手動設定 lighttpd&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;上游 DNS 伺服器加密&lt;br&gt;(DNS-over-HTTPS, DNS-over-TLS, DNSCrypt)&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌ (需安裝額外插件)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;跨平台支援&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌ (需透過 Docker)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;支援加密&lt;br&gt;DNS-over-HTTPS or DNS-over-TLS server&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌ (需安裝額外插件)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;阻擋惡意網域&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌ (需要使用另外的阻擋清單)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;家長管控 (阻擋成人網站)&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌ (需自行設定阻擋清單)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;強制搜尋引擎啟用安全搜尋&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Per-client (device) configuration&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;存取設定 (設定可用 AGH DNS 的名單)&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;[不需 root 權限][wiki-noroot]執行&lt;/td&gt;
          &lt;td&gt;✅&lt;/td&gt;
          &lt;td&gt;❌&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;基本上我們只用擋廣告的功能，AdGuardHome 跟 Pi-Hole 選順手好用的就好&lt;br&gt;
雖說 AdGuard Home 有原生跨平台支援，不過真的要用也是用 Docker 去不同平台執行比較方便&lt;/p&gt;
&lt;h2 id=&#34;安裝-adguard-home&#34;&gt;&lt;a href=&#34;#%e5%ae%89%e8%a3%9d-adguard-home&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;安裝 AdGuard Home
&lt;/h2&gt;&lt;h3 id=&#34;linux&#34;&gt;&lt;a href=&#34;#linux&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Linux
&lt;/h3&gt;&lt;p&gt;官方有提供 Linux 系統的自動安裝腳本&lt;br&gt;
可以用 wget, curl 等工具下載腳本&lt;/p&gt;
&lt;div class=&#34;terminal&#34; role=&#34;figure&#34; aria-label=&#34;terminal code snippet&#34;&gt;
  &lt;div class=&#34;terminal-header&#34;&gt;
    &lt;div class=&#34;terminal-btn&#34;&gt;
      &lt;div class=&#34;btn-mac mac-close&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-mini&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-full&#34;&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class=&#34;terminal-title&#34;&gt;
     &gt;_ terminal
    &lt;/div&gt;
    
  &lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wget --no-verbose -O - https://raw.githubusercontent.com/AdguardTeam/AdGuardHome/master/scripts/install.sh | sh -s -- -v&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;p&gt;腳本參數：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-c &amp;lt;channel&amp;gt;&lt;/code&gt; 使用特定的安裝渠道，預設是從 release 安裝，可用 &lt;code&gt;development&lt;/code&gt; &lt;code&gt;edge&lt;/code&gt; &lt;code&gt;beta&lt;/code&gt; &lt;code&gt;release&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-r&lt;/code&gt; 重新安裝 AdGuard Home (不可與 &lt;code&gt;-u&lt;/code&gt; 一起用)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-u&lt;/code&gt; 移除 AdGuard Home (不可與 &lt;code&gt;-r&lt;/code&gt; 一起用)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-v&lt;/code&gt; 查看更多安裝時訊息&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;或是手動下載、安裝&lt;br&gt;
到 &lt;a class=&#34;link&#34; href=&#34;https://github.com/AdguardTeam/AdGuardHome/releases&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub Release&lt;/a&gt; 下載對應 OS 的安裝檔&lt;br&gt;
例如安裝 Linux x64 版本&lt;/p&gt;
&lt;div class=&#34;terminal&#34; role=&#34;figure&#34; aria-label=&#34;terminal code snippet&#34;&gt;
  &lt;div class=&#34;terminal-header&#34;&gt;
    &lt;div class=&#34;terminal-btn&#34;&gt;
      &lt;div class=&#34;btn-mac mac-close&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-mini&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-full&#34;&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class=&#34;terminal-title&#34;&gt;
     &gt;_ terminal
    &lt;/div&gt;
    
  &lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;tar zxvf AdGuardHome_linux_amd64.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./AdGuardHome -s install&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;建議使用剛裝好系統的 VM 來裝 AdGuard Home，方便備份或是避免 port 衝突&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;windows&#34;&gt;&lt;a href=&#34;#windows&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Windows
&lt;/h3&gt;&lt;p&gt;跟 Linux 手動安裝步驟相同，到 &lt;a class=&#34;link&#34; href=&#34;https://github.com/AdguardTeam/AdGuardHome/releases&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub Release&lt;/a&gt; 下載 windows 版本後執行&lt;/p&gt;
&lt;h3 id=&#34;docker&#34;&gt;&lt;a href=&#34;#docker&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Docker
&lt;/h3&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://hub.docker.com/r/adguard/adguardhome&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;AdGuard Home Docker Hub&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;docker 指令：&lt;/p&gt;
&lt;div class=&#34;terminal&#34; role=&#34;figure&#34; aria-label=&#34;terminal code snippet&#34;&gt;
  &lt;div class=&#34;terminal-header&#34;&gt;
    &lt;div class=&#34;terminal-btn&#34;&gt;
      &lt;div class=&#34;btn-mac mac-close&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-mini&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-full&#34;&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class=&#34;terminal-title&#34;&gt;
     &gt;_ terminal
    &lt;/div&gt;
    
  &lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run --name adguardhome\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    --restart unless-stopped\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -v /my/own/workdir:/opt/adguardhome/work\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -v /my/own/confdir:/opt/adguardhome/conf\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -p 53:53/tcp -p 53:53/udp\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -p 67:67/udp -p 68:68/udp\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -p 80:80/tcp -p 443:443/tcp -p 443:443/udp -p 3000:3000/tcp\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -p 853:853/tcp\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -p 784:784/udp -p 853:853/udp -p 8853:8853/udp\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -p 5443:5443/tcp -p 5443:5443/udp\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -d adguard/adguardhome&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;p&gt;其中的 Port 設定&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-p 53:53/tcp -p 53:53/udp&lt;/code&gt;: 預設 DNS 使用 port&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 67:67/udp -p 68:68/tcp -p 68:68/udp&lt;/code&gt;: DHCP 使用 port (如不使用 DHCP 可以跳過)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 3000:3000/tcp -p 443:443/tcp&lt;/code&gt;: AdGuard Home 的管理介面 (如不需設定 HTTPS 可以不用 443 port)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 80:80/tcp -p 443:443/tcp -p 443:443/udp&lt;/code&gt;: DNS-over-HTTPS 使用 port&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 853:853/tcp&lt;/code&gt;: DNS-over-TLS 使用 port&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 784:784/udp -p 853:853/udp -p 8853:8853/udp&lt;/code&gt;: DNS-over-QUIC 使用 port (只需要設定其中一個或兩個，不需要全都用)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-p 5443:5443/tcp -p 5443:5443/udp&lt;/code&gt;: DNSCrypt 使用 port.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果要使用 DHCP server 的功能，建議將讓容器使用主機網路 (需注意 port 衝突)&lt;/p&gt;
&lt;div class=&#34;terminal&#34; role=&#34;figure&#34; aria-label=&#34;terminal code snippet&#34;&gt;
  &lt;div class=&#34;terminal-header&#34;&gt;
    &lt;div class=&#34;terminal-btn&#34;&gt;
      &lt;div class=&#34;btn-mac mac-close&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-mini&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-full&#34;&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class=&#34;terminal-title&#34;&gt;
     &gt;_ terminal
    &lt;/div&gt;
    
  &lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run --name adguardhome\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    --restart unless-stopped\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -v /my/own/workdir:/opt/adguardhome/work\
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    --network host
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    -d adguard/adguardhome&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;h2 id=&#34;設定&#34;&gt;&lt;a href=&#34;#%e8%a8%ad%e5%ae%9a&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;設定
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;這邊我是在自己的電腦上用 docker 展示，連線會用 localhost 去連&lt;br&gt;
實際使用建議獨立裝在其他不常關的電腦或樹梅派，連線就使用 IP 連&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;初次設定&#34;&gt;&lt;a href=&#34;#%e5%88%9d%e6%ac%a1%e8%a8%ad%e5%ae%9a&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;初次設定
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_init1.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_init1_hu_c41340fb8b75670c.png 480w, https://zonego.tw/post/adguardhome/adguard_init1_hu_1520cc7b1b080045.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard init&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;網路設定&#34;&gt;&lt;a href=&#34;#%e7%b6%b2%e8%b7%af%e8%a8%ad%e5%ae%9a&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;網路設定
&lt;/h4&gt;&lt;p&gt;接下來設定監聽的網卡(透過哪張網卡能存取)，用 Docker 執行建議可以用所有介面&lt;br&gt;
管理員的監聽介面如果在 docker 沒有使用 80，記得設定成 3000，避免設定完就連不到&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_init2.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_init2_hu_1263b01e6df814a6.png 480w, https://zonego.tw/post/adguardhome/adguard_init2_hu_b989bdf6c75a7b02.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard init&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;br&gt;
DNS 伺服器監聽介面同上，建議保留預設的 53 Port&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_init3.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_init3_hu_b104f38bf717362f.png 480w, https://zonego.tw/post/adguardhome/adguard_init3_hu_cc99c5ec322411cc.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard init&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;h5 id=&#34;管理帳號設定&#34;&gt;&lt;a href=&#34;#%e7%ae%a1%e7%90%86%e5%b8%b3%e8%99%9f%e8%a8%ad%e5%ae%9a&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;管理帳號設定
&lt;/h5&gt;&lt;p&gt;設定管理員帳號密碼，建議不要用 &lt;code&gt;root&lt;/code&gt;, &lt;code&gt;admin&lt;/code&gt;, &lt;code&gt;administor&lt;/code&gt; 等常見的管理帳號&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_init4.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_init4_hu_ac178ebf82256630.png 480w, https://zonego.tw/post/adguardhome/adguard_init4_hu_bc0a0e259237232c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard init&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;用戶端設定&#34;&gt;&lt;a href=&#34;#%e7%94%a8%e6%88%b6%e7%ab%af%e8%a8%ad%e5%ae%9a&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;用戶端設定
&lt;/h4&gt;&lt;p&gt;初次設定完成，這邊可以看一下不同種類客戶端該怎麼設定使用這個 DNS 伺服器&lt;br&gt;
基本上只要將網路設定裡的 DNS 伺服器，改成這邊監聽的網卡的IP，就可以用 Adguard 過濾網站&lt;br&gt;
路由器也要套用的話，是去修改路由器的 DHCP 設定，讓子網段自動分配的 DNS 都使用我們架的 Adguard IP&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_init5.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_init5_hu_12423511056369df.png 480w, https://zonego.tw/post/adguardhome/adguard_init5_hu_d6888cf10b32994f.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard init&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_init6.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_init6_hu_d10fb0fb6d47a0f0.png 480w, https://zonego.tw/post/adguardhome/adguard_init6_hu_fbeeef82fdfb9984.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard init&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;h5 id=&#34;初次設定完成&#34;&gt;&lt;a href=&#34;#%e5%88%9d%e6%ac%a1%e8%a8%ad%e5%ae%9a%e5%ae%8c%e6%88%90&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;初次設定完成🎉
&lt;/h5&gt;&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_init7.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_init7_hu_620934c5140f0ea6.png 480w, https://zonego.tw/post/adguardhome/adguard_init7_hu_a58803533faa92ac.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard init&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;接著可以用設定好的管理員帳號登入&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_login.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_login_hu_beb8fd4345ee5f2f.png 480w, https://zonego.tw/post/adguardhome/adguard_login_hu_47eedc60f97ddb61.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard login&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;設定上游-dns-伺服器&#34;&gt;&lt;a href=&#34;#%e8%a8%ad%e5%ae%9a%e4%b8%8a%e6%b8%b8-dns-%e4%bc%ba%e6%9c%8d%e5%99%a8&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;設定上游 DNS 伺服器
&lt;/h3&gt;&lt;p&gt;在 Adguard Home 中並不會紀錄設定之外的網域及IP的對應&lt;br&gt;
其他網域就需要去其他的 DNS 伺服器(上游 DNS 伺服器)查詢&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_upstreamDNS.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_upstreamDNS_hu_2eb2c48139a1647f.png 480w, https://zonego.tw/post/adguardhome/adguard_upstreamDNS_hu_6c6ff661c95a3993.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard upstream DNS&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Adguard Home 整理了幾個常用的 DNS 伺服器 &lt;a class=&#34;link&#34; href=&#34;https://adguard-dns.io/kb/zh-CN/general/dns-providers/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://adguard-dns.io/kb/zh-CN/general/dns-providers/&lt;/a&gt;&lt;br&gt;
這邊推薦可以用 Google DNS 跟 Cloudflare DNS&lt;/p&gt;
&lt;h4 id=&#34;google-dns&#34;&gt;&lt;a href=&#34;#google-dns&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Google DNS
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;協定&lt;/th&gt;
          &lt;th&gt;地址&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS, IPv4&lt;/td&gt;
          &lt;td&gt;8.8.8.8 和 8.8.4.4&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS, IPv6&lt;/td&gt;
          &lt;td&gt;2001:4860:4860::8888 和 2001:4860:4860::8844&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS-over-HTTPS&lt;/td&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://dns.google/dns-query&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://dns.google/dns-query&lt;/a&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS-over-TLS&lt;/td&gt;
          &lt;td&gt;tls://dns.google&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;cloudflare-dns&#34;&gt;&lt;a href=&#34;#cloudflare-dns&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Cloudflare DNS
&lt;/h4&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;協定&lt;/th&gt;
          &lt;th&gt;地址&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS, IPv4&lt;/td&gt;
          &lt;td&gt;1.1.1.1 和 1.0.0.1&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS, IPv6&lt;/td&gt;
          &lt;td&gt;2606:4700:4700::1111 和 2606:4700:4700::1001&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS-over-HTTPS IPv4&lt;/td&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://dns.cloudflare.com/dns-query&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://dns.cloudflare.com/dns-query&lt;/a&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS-over-HTTPS IPv6&lt;/td&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://dns.cloudflare.com/dns-query&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://dns.cloudflare.com/dns-query&lt;/a&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS-over-TLS&lt;/td&gt;
          &lt;td&gt;tls://1dot1dot1dot1.cloudflare-dns.com&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;過濾器設定&#34;&gt;&lt;a href=&#34;#%e9%81%8e%e6%bf%be%e5%99%a8%e8%a8%ad%e5%ae%9a&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;過濾器設定
&lt;/h2&gt;&lt;h3 id=&#34;過濾黑名單&#34;&gt;&lt;a href=&#34;#%e9%81%8e%e6%bf%be%e9%bb%91%e5%90%8d%e5%96%ae&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;過濾黑名單
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_hu_27362711a555191f.png 480w, https://zonego.tw/post/adguardhome/adguard_blocklist_hu_f2a7f37cc6e97dd6.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard blocklist&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;預設黑名單&#34;&gt;&lt;a href=&#34;#%e9%a0%90%e8%a8%ad%e9%bb%91%e5%90%8d%e5%96%ae&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;預設黑名單
&lt;/h4&gt;&lt;p&gt;Adguard Home 預設使用 Adguard 的過濾黑名單&lt;br&gt;
新增黑名單也很方便&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_new.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_new_hu_93468ba45561cbea.png 480w, https://zonego.tw/post/adguardhome/adguard_blocklist_new_hu_86602eaf0bb40501.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard blocklist new&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;br&gt;
把想套用的黑名單加進去啟用&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_new2.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_new2_hu_7a5596482bb93c5e.png 480w, https://zonego.tw/post/adguardhome/adguard_blocklist_new2_hu_5fc8175a31b71e05.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard blocklist new&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;第三方黑名單&#34;&gt;&lt;a href=&#34;#%e7%ac%ac%e4%b8%89%e6%96%b9%e9%bb%91%e5%90%8d%e5%96%ae&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;第三方黑名單
&lt;/h4&gt;&lt;p&gt;要使用第三方黑名單只要有網址也可以匯入&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_new3.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_new3_hu_742829d59ccda239.png 480w, https://zonego.tw/post/adguardhome/adguard_blocklist_new3_hu_67ccedf6985906bd.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard blocklist new&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_new4.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_blocklist_new4_hu_f4b3aad0b09c51af.png 480w, https://zonego.tw/post/adguardhome/adguard_blocklist_new4_hu_f330d96dc6e74148.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard blocklist new&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;這邊介紹一款專為臺灣人設計的廣告阻擋規則 &lt;a class=&#34;link&#34; href=&#34;https://github.com/FutaGuard/LowTechFilter&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;LowTechFilter&lt;/a&gt;&lt;br&gt;
提供阻擋台灣常見的簡訊詐騙、釣魚網站和農場文&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;簡訊詐騙、釣魚網站 &lt;a class=&#34;link&#34; href=&#34;https://filter.futa.gg/hosts.txt&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://filter.futa.gg/hosts.txt&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;農場文 &lt;a class=&#34;link&#34; href=&#34;https://filter.futa.gg/nofarm_hosts.txt&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://filter.futa.gg/nofarm_hosts.txt&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;手動過濾規則&#34;&gt;&lt;a href=&#34;#%e6%89%8b%e5%8b%95%e9%81%8e%e6%bf%be%e8%a6%8f%e5%89%87&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;手動過濾規則
&lt;/h3&gt;&lt;p&gt;可以從主頁到 DNS 查詢紀錄裡去增加封鎖名單，不過缺點是之前要先查詢過&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;還沒有用戶端用這個 DNS 伺服器之前，紀錄會是空的&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_dashboard.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_dashboard_hu_4a63ac9c0384ed5f.png 480w, https://zonego.tw/post/adguardhome/adguard_dashboard_hu_b8822dbeeb6c45c8.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard dashboard&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_record.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_record_hu_ae0581852264a908.png 480w, https://zonego.tw/post/adguardhome/adguard_record_hu_2e7b49a627e0ef8.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard record&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;家長管控&#34;&gt;&lt;a href=&#34;#%e5%ae%b6%e9%95%b7%e7%ae%a1%e6%8e%a7&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;家長管控
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/adguardhome/adguard_ad.png&#34;
	width=&#34;2592&#34;
	height=&#34;1788&#34;
	srcset=&#34;https://zonego.tw/post/adguardhome/adguard_ad_hu_a5a8d2147000d4c5.png 480w, https://zonego.tw/post/adguardhome/adguard_ad_hu_a19cf949bbd2a3d.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;adguard blocklist new&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;144&#34;
		data-flex-basis=&#34;347px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>設定 WikiJS 使用 Keyckoak 做身分認證</title>
        <link>https://zonego.tw/post/wikijs-keyckoak/</link>
        <pubDate>Fri, 10 Feb 2023 14:35:35 +0800</pubDate>
        
        <guid>https://zonego.tw/post/wikijs-keyckoak/</guid>
        <description>&lt;img src="https://camo.githubusercontent.com/0517b8b479b59ff711930e51861faf2154aa54524503cf5de4b7ef506e1119d1/68747470733a2f2f7374617469632e7265717561726b732e696f2f6c6f676f2f77696b696a732d66756c6c2e737667" alt="Featured image of post 設定 WikiJS 使用 Keyckoak 做身分認證" /&gt;&lt;p&gt;最近在設定 WikiJS 串接 Keycloak 作身分認證時碰到一些問題，所以在這邊做個紀錄&lt;br&gt;
這邊就跳過安裝過程&lt;/p&gt;
&lt;p&gt;紀錄時使用版本： &lt;code&gt;WikiJS 2.5.296&lt;/code&gt;  &lt;code&gt;Keycloak 20.0.3&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;keycloak-設定&#34;&gt;&lt;a href=&#34;#keycloak-%e8%a8%ad%e5%ae%9a&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Keycloak 設定
&lt;/h2&gt;&lt;p&gt;挑選你要設定登入的 realm ，這邊我為了不要應用程式的帳號跟 Keycloak 的管理帳號混用，建一個新的 realm 叫做 demo&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;realm 像是用來管理帳號的群組，在這個群組內建好的應用方式都可以透過這些帳號登入&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;新增-client&#34;&gt;&lt;a href=&#34;#%e6%96%b0%e5%a2%9e-client&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;新增 client
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client_hu_59c5fb05d88a802.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client_hu_f90544bb353886d6.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;creat&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;打上 client ID (不可重複) ，next 下一步&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client2.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client2_hu_e6c69881ba5d5d97.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client2_hu_2b5cecc79730a611.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;creat&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;這邊 Client authentication 必須要勾選，才會產生後面要用到的 Client Secret。點 Save 儲存&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client3.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client3_hu_b86dcd7ae90ac521.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-new_client3_hu_ed171e0323e0b9a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;creat&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;設定-client&#34;&gt;&lt;a href=&#34;#%e8%a8%ad%e5%ae%9a-client&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;設定 client
&lt;/h3&gt;&lt;p&gt;打開剛剛建好的 client &lt;code&gt;wiki&lt;/code&gt;&lt;br&gt;
下滑到 Access Setting&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-access-setting.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-access-setting_hu_4a5c36aaf9b04dc7.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-access-setting_hu_6093315fa6b90091.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;setting&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;假設我們的 wikijs 網址是 &lt;a class=&#34;link&#34; href=&#34;https://wiki.example.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://wiki.example.com&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;/th&gt;
          &lt;th&gt;填入URL&lt;/th&gt;
          &lt;th&gt;說明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Root URL&lt;/td&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://wiki.example.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://wiki.example.com&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;網站根網址&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Home URL&lt;/td&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://wiki.example.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://wiki.example.com&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;登入後重導向的根網址 (通常跟 root url 相同)&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Valid rediect URIs&lt;/td&gt;
          &lt;td&gt;/XXXXXXXX/callback/*&lt;/td&gt;
          &lt;td&gt;允許重導向頁面網址&lt;br&gt;用 * 可以代表所有頁面，但要注意安全性&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Valid post logout&lt;/td&gt;
          &lt;td&gt;&lt;a class=&#34;link&#34; href=&#34;https://wiki.example.com&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://wiki.example.com&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;允許登出後轉向的頁面&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;redirect URIs&lt;/td&gt;
          &lt;td&gt;/*&lt;/td&gt;
          &lt;td&gt;允許登出後的重導向位置&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Web origins&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;允許 CORS origins 的網址&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;Valid rediect URIs&lt;/code&gt; 可以在後面設定 wikijs 時取得&lt;/p&gt;
&lt;p&gt;如果你的 Keycloak 有安裝客製主題，可以在 Login settings 裡修改&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-login-theme.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-login-theme_hu_def39961a2aa9562.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-login-theme_hu_52890d545467261d.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;setting&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Credentials 分頁有後續會用到的 client key，可以先複製&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-client_key.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-client_key_hu_bcd71828ac39b4b4.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-client_key_hu_ee8fe3de6f162f0.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;setting&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;wikijs-設定&#34;&gt;&lt;a href=&#34;#wikijs-%e8%a8%ad%e5%ae%9a&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Wikijs 設定
&lt;/h2&gt;&lt;p&gt;進到設定後選認證 &amp;gt; 新增登入機制&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider_hu_76da65c03320c760.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider_hu_e61fcea0cc9fdb02.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;wikijs&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;選擇 Keycloak&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider2.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider2_hu_8cf253a2021379cf.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider2_hu_d55e471b21d6b3a8.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;wikijs&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;再來填入你的 Keycloak 網址、realm 名稱跟剛剛建好的 Client ID&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider3.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider3_hu_b43047cf8b71fef6.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider3_hu_384c1e1482c58d87.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;wikijs&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;下面4個網址可以參考 wikijs 的提示，不過左邊的 &lt;code&gt;/auth&lt;/code&gt; 要去掉，例如：&lt;/p&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34; code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wikij 提示
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://KEYCLOAK-HOST/auth/realms/YOUR-REALM/protocol/openid-connect/auth
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;左邊的 /auth 去掉，範例的 realms 是 demo
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://your.keycloak-host.com/realms/demo/protocol/openid-connect/auth&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;p&gt;Client Secret 貼上 Keycloak Credentials 內複製的金鑰&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider4.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider4_hu_a4a33e52a032301b.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider4_hu_8413abe9dddf7cad.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;wikijs&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;開放自由註冊可以斟酌打開，若沒開沒登入過的帳號會無法登入&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider5.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider5_hu_e51072e0ddd1bdf4.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider5_hu_4304b05d66ddfbcf.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;wikijs&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;最下面可以取得 keycloak 設定需要的 Valid rediect URI&lt;br&gt;
只需要填 /login/a28088b1-8e47-4d16-aa6f-0a32d8af192f/callback&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider6.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider6_hu_66d22166545bbf11.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider6_hu_3bc3266a3c31d45.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;wikijs&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;設定完記得卷到上面點套用設定&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider3.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider3_hu_b43047cf8b71fef6.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider3_hu_384c1e1482c58d87.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;wikijs&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;問題排除&#34;&gt;&lt;a href=&#34;#%e5%95%8f%e9%a1%8c%e6%8e%92%e9%99%a4&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;問題排除
&lt;/h2&gt;&lt;h3 id=&#34;登出時遇到-invalid-parameter-redirect_uri&#34;&gt;&lt;a href=&#34;#%e7%99%bb%e5%87%ba%e6%99%82%e9%81%87%e5%88%b0-invalid-parameter-redirect_uri&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;登出時遇到 invalid parameter redirect_uri
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/invalid-parameter-redirect_uri.png&#34;
	width=&#34;1006&#34;
	height=&#34;350&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/invalid-parameter-redirect_uri_hu_e3706bb24ccf546c.png 480w, https://zonego.tw/post/wikijs-keyckoak/invalid-parameter-redirect_uri_hu_c25ba708c8822e85.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;invalid parameter redirect_uri&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;287&#34;
		data-flex-basis=&#34;689px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;keycloak 在 18 版之後就不支援登出時使用&lt;code&gt;redirect_uri&lt;/code&gt;參數，所以只能先暫時先把 WikiJS 的同步登出先關閉，等 WikiJS 更新&lt;br&gt;
&lt;img src=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider5.png&#34;
	width=&#34;2876&#34;
	height=&#34;1574&#34;
	srcset=&#34;https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider5_hu_e51072e0ddd1bdf4.png 480w, https://zonego.tw/post/wikijs-keyckoak/keycloak-wikijs-provider5_hu_4304b05d66ddfbcf.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;WikiJS sync logout&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;182&#34;
		data-flex-basis=&#34;438px&#34;
	
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;關閉後的缺點是在同一台裝置，session 未過期前，點一下 keycloak 登入就會自動登進去&lt;/p&gt;&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>OpenSpeedTest 純HTML5的內網測速工具</title>
        <link>https://zonego.tw/post/speedtest/</link>
        <pubDate>Tue, 15 Mar 2022 18:46:58 +0800</pubDate>
        
        <guid>https://zonego.tw/post/speedtest/</guid>
        <description>&lt;img src="https://zonego.tw/post/speedtest/speed-meter.jpg" alt="Featured image of post OpenSpeedTest 純HTML5的內網測速工具" /&gt;&lt;p&gt;大家平常要測網路速度都會想到 Ookla 的 &lt;a class=&#34;link&#34; href=&#34;https://Speedtest.net&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Speedtest.net&lt;/a&gt;&lt;br&gt;
在簡單的網路環境內，Speedtest 就可以完成測速的工作，但如果我要測試內網速度呢?&lt;/p&gt;
&lt;h2 id=&#34;網路環境&#34;&gt;&lt;a href=&#34;#%e7%b6%b2%e8%b7%af%e7%92%b0%e5%a2%83&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;網路環境
&lt;/h2&gt;&lt;p&gt;在測試之前，我們先了解網路速度到底是在測甚麼。&lt;br&gt;
一般家用的網路架構大概如圖，由中華電信這些電信商(ISP)提供網際網路連線(雲圖示)，之後在你家裝一台路由器，讓家裡的設備可以透過它上網。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/speedtest/network-simple.png&#34;
	width=&#34;259&#34;
	height=&#34;303&#34;
	srcset=&#34;https://zonego.tw/post/speedtest/network-simple_hu_e647f709513582e7.png 480w, https://zonego.tw/post/speedtest/network-simple_hu_f2b836ae4bccba32.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;85&#34;
		data-flex-basis=&#34;205px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;我們平常用的 Speedtest.net 其實就是在測家裡到網際網路的連線速度。&lt;br&gt;
只是因為網路架構相當簡單，所以電腦、手機等終端的連線速度就等於連網際網路的速度。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;若是有在玩自架服務 homelab 的朋友網路架構絕對沒那麼簡單，可能比較像這張圖&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/speedtest/network-complex.png&#34;
	width=&#34;603&#34;
	height=&#34;448&#34;
	srcset=&#34;https://zonego.tw/post/speedtest/network-complex_hu_4a931950aba2308b.png 480w, https://zonego.tw/post/speedtest/network-complex_hu_c33aefd0f417460a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;134&#34;
		data-flex-basis=&#34;323px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;在接到網際網路(後面以外網代稱)之前，接到路由器 Router 架設區域網路(後面以內網代稱)。&lt;br&gt;
然後連交換機 Switch 去串接各終端設備和伺服器、監視器等&lt;/p&gt;
&lt;p&gt;所以如果我們要測試內網裡面電腦連伺服器的速度，如下圖。Speedtest.net 當然就測不出來了&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/speedtest/network-local.png&#34;
	width=&#34;603&#34;
	height=&#34;448&#34;
	srcset=&#34;https://zonego.tw/post/speedtest/network-local_hu_6222dd163294c7fe.png 480w, https://zonego.tw/post/speedtest/network-local_hu_ce2fc046e224ff41.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;134&#34;
		data-flex-basis=&#34;323px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;openspeedtest&#34;&gt;&lt;a href=&#34;#openspeedtest&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;OpenSpeedTest
&lt;/h2&gt;&lt;p&gt;講了這麼多前提，主要就是要紹可以自己架設的 OpenSpeedTest&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://openspeedtest.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;官網&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://hub.docker.com/r/openspeedtest/latest&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DockerHub&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;只要把它架在自己的伺服器上，就可以像在用 Speedtest.net 一樣測試內網的網速🎉&lt;/p&gt;
&lt;p&gt;這邊是官方那邊的 DEMO (沒錯它可以直接嵌在你的網頁內)&lt;/p&gt;
&lt;div style=&#34;text-align:right;&#34;&gt;&lt;div style=&#34;min-height:360px;&#34;&gt;&lt;div style=&#34;width:100%;height:0;padding-bottom:50%;position:relative;&#34;&gt;&lt;iframe style=&#34;border:none;position:absolute;top:0;left:0;width:100%;height:100%;min-height:360px;border:none;overflow:hidden !important;&#34; src=&#34;//openspeedtest.com/Get-widget.php&#34;&gt;&lt;/iframe&gt;&lt;/div&gt;&lt;/div&gt;Provided by  &lt;a href=&#34;http://openspeedtest.com&#34;&gt;OpenSpeedtest.com&lt;/a&gt;&lt;/div&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;html code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; html&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-html&#34; data-lang=&#34;html&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;text-align:right;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;min-height:360px;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;width:100%;height:0;padding-bottom:50%;position:relative;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;iframe&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;na&#34;&gt;style&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;border:none;position:absolute;top:0;left:0;width:100%;height:100%;min-height:360px;border:none;overflow:hidden !important;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;na&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;//openspeedtest.com/Get-widget.php&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;iframe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;Provided by &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;href&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;http://openspeedtest.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;OpenSpeedtest.com&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;a&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;div&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;h2 id=&#34;安裝-openspeedtest&#34;&gt;&lt;a href=&#34;#%e5%ae%89%e8%a3%9d-openspeedtest&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;安裝 OpenSpeedTest
&lt;/h2&gt;&lt;p&gt;OpenSpeedTest 大致分為3種安裝方式&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安裝程式包&lt;/li&gt;
&lt;li&gt;Docker&lt;/li&gt;
&lt;li&gt;從原始碼手動架設&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;程式包&#34;&gt;&lt;a href=&#34;#%e7%a8%8b%e5%bc%8f%e5%8c%85&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;程式包
&lt;/h3&gt;&lt;p&gt;官方打包好的安裝檔在這邊&lt;a class=&#34;link&#34; href=&#34;https://openspeedtest.com/speed-testing-application-for-your-website.php#Option-3&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;下載頁&lt;/a&gt;可以找到&lt;br&gt;
支援主流的作業系統 Windows, Mac, Linux 之外，連 Android 跟 IOS 都有 (可能用來測熱點性能吧?)&lt;/p&gt;
&lt;p&gt;點 Start Server 後就可以連 👉 給的網址測速了&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/speedtest/OSTV2-SS.png&#34;
	width=&#34;750&#34;
	height=&#34;523&#34;
	srcset=&#34;https://zonego.tw/post/speedtest/OSTV2-SS_hu_2ff9e217a78e9403.png 480w, https://zonego.tw/post/speedtest/OSTV2-SS_hu_915ad5b7f983b2ba.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;143&#34;
		data-flex-basis=&#34;344px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;docker&#34;&gt;&lt;a href=&#34;#docker&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Docker
&lt;/h3&gt;&lt;div class=&#34;terminal&#34; role=&#34;figure&#34; aria-label=&#34;terminal code snippet&#34;&gt;
  &lt;div class=&#34;terminal-header&#34;&gt;
    &lt;div class=&#34;terminal-btn&#34;&gt;
      &lt;div class=&#34;btn-mac mac-close&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-mini&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-full&#34;&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class=&#34;terminal-title&#34;&gt;
     &gt;_ terminal
    &lt;/div&gt;
    
  &lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker run --restart=unless-stopped --name openspeedtest -d -p 3000:3000 -p 3001:3001 openspeedtest/latest&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;p&gt;啟動後連 http://YOUR-IP:3000 或 https://YOUR-IP:3001 測速&lt;/p&gt;
&lt;h3 id=&#34;原始碼安裝&#34;&gt;&lt;a href=&#34;#%e5%8e%9f%e5%a7%8b%e7%a2%bc%e5%ae%89%e8%a3%9d&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;原始碼安裝
&lt;/h3&gt;&lt;p&gt;首先到 &lt;a class=&#34;link&#34; href=&#34;https://github.com/openspeedtest/Speed-Test&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github&lt;/a&gt; 下載或 clone 原始碼&lt;br&gt;
準備好 Nginx ，套用&lt;a class=&#34;link&#34; href=&#34;https://github.com/openspeedtest/Nginx-Configuration&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;openspeedtest 預設 nginx 設定&lt;/a&gt;&lt;br&gt;
然後將下載好的OpenSpeedTest原始碼，放到 Nginx 的網頁資料夾就可以用了&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;推薦還是用 Docker 安裝，簡單省事，如果需要整合進你的網站再用原始碼安裝&lt;/p&gt;&lt;/blockquote&gt;



&lt;div class=&#34;unsplash unsplash-info&#34; &gt;
    &lt;div class=&#34;unsplash-title&#34;&gt;&lt;svg  xmlns=&#34;http://www.w3.org/2000/svg&#34;  width=&#34;24&#34;  height=&#34;24&#34;  viewBox=&#34;0 0 24 24&#34;  fill=&#34;none&#34;  stroke=&#34;currentColor&#34;  stroke-width=&#34;2&#34;  stroke-linecap=&#34;round&#34;  stroke-linejoin=&#34;round&#34;  class=&#34;icon unsplash-icon icon unsplash-icon-tabler icon unsplash-icons-tabler-outline icon unsplash-icon-tabler-photo&#34;&gt;&lt;path stroke=&#34;none&#34; d=&#34;M0 0h24v24H0z&#34; fill=&#34;none&#34;/&gt;&lt;path d=&#34;M15 8h.01&#34; /&gt;&lt;path d=&#34;M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z&#34; /&gt;&lt;path d=&#34;M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5&#34; /&gt;&lt;path d=&#34;M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3&#34; /&gt;&lt;/svg&gt;&lt;/div&gt;
    &lt;p&gt;Photo by &lt;a href=&#34;https://unsplash.com/@chrisliverani?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash&#34;&gt;Chris Liverani&lt;/a&gt; on &lt;a href=&#34;https://unsplash.com/photos/white-and-blue-analog-tachometer-gauge-HUJDz6CJEaM?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash&#34;&gt;Unsplash&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>Gitea - 自己的 Git 自己架</title>
        <link>https://zonego.tw/post/gitea/</link>
        <pubDate>Thu, 25 Nov 2021 19:22:30 +0800</pubDate>
        
        <guid>https://zonego.tw/post/gitea/</guid>
        <description>&lt;img src="https://zonego.tw/post/gitea/Gitea.jpg" alt="Featured image of post Gitea - 自己的 Git 自己架" /&gt;&lt;p&gt;作為寫過程式的人，Git是必備工具 &lt;del&gt;除非只是寫好玩的&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;常見的線上Git儲藏庫就是 &lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub&lt;/a&gt;、&lt;a class=&#34;link&#34; href=&#34;https://about.gitlab.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Gitlab&lt;/a&gt;、&lt;a class=&#34;link&#34; href=&#34;https://bitbucket.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Bitbucket&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果對於這些公開平台不放心，或是程式碼不想外流，那就自己架私服吧!&lt;/p&gt;
&lt;p&gt;常見的有 &lt;a class=&#34;link&#34; href=&#34;https://gitea.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Gitea&lt;/a&gt;、&lt;a class=&#34;link&#34; href=&#34;https://gogs.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;gogs&lt;/a&gt;或是&lt;a class=&#34;link&#34; href=&#34;https://about.gitlab.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Gitlab&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Gitlab裡面包含 CI/CD 工具等功能，十分肥大&lt;/p&gt;
&lt;p&gt;想要一個安裝簡單、有完整git功能又有中文介面，那就選 Gitea 吧！&lt;/p&gt;
&lt;h2 id=&#34;安裝&#34;&gt;&lt;a href=&#34;#%e5%ae%89%e8%a3%9d&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;安裝
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.gitea.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;說明文件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Gitea 提供很多安裝方式，我這邊選則用 docker &lt;del&gt;手邊有現成的docker伺服器，不用白不用&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.gitea.io/zh-tw/install-with-docker-rootless/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;docker-compose 安裝說明&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;選擇版本&#34;&gt;&lt;a href=&#34;#%e9%81%b8%e6%93%87%e7%89%88%e6%9c%ac&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;選擇版本
&lt;/h3&gt;&lt;p&gt;Gitea 的官方映像可以在 &lt;a class=&#34;link&#34; href=&#34;https://hub.docker.com/r/gitea/gitea/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Docker Hub&lt;/a&gt; 找到&lt;/p&gt;
&lt;p&gt;版本 tag 與 Gitea 的 &lt;a class=&#34;link&#34; href=&#34;https://github.com/go-gitea/gitea&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Github&lt;/a&gt; 上發布的版本號一樣&lt;/p&gt;
&lt;p&gt;&lt;code&gt;latest&lt;/code&gt; 則是最新的穩定版&lt;/p&gt;
&lt;h3 id=&#34;選擇資料庫&#34;&gt;&lt;a href=&#34;#%e9%81%b8%e6%93%87%e8%b3%87%e6%96%99%e5%ba%ab&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;選擇資料庫
&lt;/h3&gt;&lt;p&gt;Gitea 支援多種資料庫，例如 &lt;code&gt;mysql&lt;/code&gt; &lt;code&gt;mariadb&lt;/code&gt; &lt;code&gt;PostgreSQL&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;安裝過程&#34;&gt;&lt;a href=&#34;#%e5%ae%89%e8%a3%9d%e9%81%8e%e7%a8%8b&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;安裝過程
&lt;/h2&gt;&lt;p&gt;使用 docker-compose 安裝&lt;/p&gt;
&lt;p&gt;我這邊選用 mysql 資料庫&lt;/p&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;yaml code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; yaml&lt;/span&gt;
    &lt;span  class=&#34;code-title&#34;&gt;📄 docker-compose.yml&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34; title=&#34;docker-compose.yml&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gitea/gitea:1.15.6-rootless&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;GITEA__database__DB_TYPE=mysql&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;GITEA__database__HOST=db:3306&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;GITEA__database__NAME=gitea&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;GITEA__database__USER=gitea&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;GITEA__database__PASSWD=gitea&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;always&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;./data:/var/lib/gitea&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;./config:/etc/gitea  &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;/etc/timezone:/etc/timezone:ro&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;/etc/localtime:/etc/localtime:ro&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;10080:3000&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;10022:22&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;depends_on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;db&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mysql:8&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;always&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;MYSQL_ROOT_PASSWORD=gitea&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;MYSQL_USER=gitea&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;MYSQL_PASSWORD=gitea&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;MYSQL_DATABASE=gitea&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;./mysql:/var/lib/mysql&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;p&gt;執行&lt;/p&gt;
&lt;div class=&#34;terminal&#34; role=&#34;figure&#34; aria-label=&#34;terminal code snippet&#34;&gt;
  &lt;div class=&#34;terminal-header&#34;&gt;
    &lt;div class=&#34;terminal-btn&#34;&gt;
      &lt;div class=&#34;btn-mac mac-close&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-mini&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-full&#34;&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class=&#34;terminal-title&#34;&gt;
     &gt;_ terminal
    &lt;/div&gt;
    
  &lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker-compose up&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;p&gt;完成後可以用 &lt;a class=&#34;link&#34; href=&#34;http://hostname:10080&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://hostname:10080&lt;/a&gt; 連到你剛剛架的 gitea&lt;/p&gt;
&lt;p&gt;SSH 要使用 10022 例如&lt;/p&gt;
&lt;div class=&#34;terminal&#34; role=&#34;figure&#34; aria-label=&#34;terminal code snippet&#34;&gt;
  &lt;div class=&#34;terminal-header&#34;&gt;
    &lt;div class=&#34;terminal-btn&#34;&gt;
      &lt;div class=&#34;btn-mac mac-close&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-mini&#34;&gt;&lt;/div&gt;
      &lt;div class=&#34;btn-mac mac-full&#34;&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class=&#34;terminal-title&#34;&gt;
     &gt;_ terminal
    &lt;/div&gt;
    
  &lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone ssh://git@hostname:10022/username/repo.git&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;p&gt;如果想用預設 Port&lt;/p&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;yaml code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; yaml&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;#將這段&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;10080:3000&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;10022:22&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#換成這段&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;80:3000&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;22:22&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;p&gt;到這邊自己用應該夠了，後續如果要在外網使用，建議還是設定網段 + SSl憑證 (弄成https) 會比較安全&lt;/p&gt;
&lt;h2 id=&#34;設定-revers-proxy&#34;&gt;&lt;a href=&#34;#%e8%a8%ad%e5%ae%9a-revers-proxy&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;設定 revers proxy
&lt;/h2&gt;&lt;p&gt;我自己是使用 traefik 做 revers proxy&lt;br&gt;
由於之前是用 haproxy ，改用 traefik 之後還是習慣用檔案手動設定&lt;br&gt;
後面的範例會以設定檔的方式為主，也可以參考官方文件改成 docker labels&lt;/p&gt;
&lt;h3 id=&#34;https&#34;&gt;&lt;a href=&#34;#https&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;https
&lt;/h3&gt;&lt;p&gt;我的 traefik 有設定監看資料夾的動態設定檔，service 跟 router 分別在不同檔案&lt;br&gt;
如果沒有用動態設定檔的話，設定應該都在 traefik.toml 只不過改完後要重開&lt;/p&gt;
&lt;h4 id=&#34;啟用動態設定檔&#34;&gt;&lt;a href=&#34;#%e5%95%9f%e7%94%a8%e5%8b%95%e6%85%8b%e8%a8%ad%e5%ae%9a%e6%aa%94&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;啟用動態設定檔
&lt;/h4&gt;&lt;p&gt;directory 可以自行更換&lt;/p&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;toml code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; toml&lt;/span&gt;
    &lt;span  class=&#34;code-title&#34;&gt;📄 traefik.toml&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34; title=&#34;traefik.toml&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;providers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;providers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;directory&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/traefik/dynamic_configs&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;watch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;h4 id=&#34;設定-lets-encrypt-自動申請憑證&#34;&gt;&lt;a href=&#34;#%e8%a8%ad%e5%ae%9a-lets-encrypt-%e8%87%aa%e5%8b%95%e7%94%b3%e8%ab%8b%e6%86%91%e8%ad%89&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;設定 let&amp;rsquo;s encrypt 自動申請憑證
&lt;/h4&gt;&lt;p&gt;驗證方式有幾種可以選，一般常用的是 http Challenge&lt;/p&gt;
&lt;p&gt;我的網站有套用 cloudflare 保護，DNS 代理就轉過去 cloudflare 了&lt;br&gt;
外加 cloudflare 有支援 dns Challenge，乾脆就用這種 DNS 驗證比較省事&lt;br&gt;
如果你的網域租賃商有提供 dns Challenge，也可以用這種方式驗證比較簡單&lt;br&gt;
只要設定一次，可以套用多個網域&lt;/p&gt;
&lt;p&gt;resolvers 可以改成你的網域租賃商，我這邊寫的是 cloudflare 的 DNS&lt;br&gt;
如果要套用 cloudflare 的防護，這邊不用改&lt;/p&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;toml code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; toml&lt;/span&gt;
    &lt;span  class=&#34;code-title&#34;&gt;📄 traefik.toml&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34; title=&#34;traefik.toml&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;certificatesResolvers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cloudflare-resolver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;acme&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;email&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;youremail@gmail.com&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;storage&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/traefik/acme.json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;certificatesResolvers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;cloudflare-resolver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;acme&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;dnsChallenge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;provider&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;cloudflare&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;delayBeforeCheck&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;resolvers&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1.1.1.1:53&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;1.0.0.1:53&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;h4 id=&#34;設定-entry-point&#34;&gt;&lt;a href=&#34;#%e8%a8%ad%e5%ae%9a-entry-point&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;設定 entry point
&lt;/h4&gt;&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;toml code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; toml&lt;/span&gt;
    &lt;span  class=&#34;code-title&#34;&gt;📄 traefik.toml&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34; title=&#34;traefik.toml&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;entryPoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;entryPoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;ssh&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;:22&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;entryPoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;web&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;:80&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;entryPoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;websecure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;address&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;:443&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;entryPoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;websecure&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nx&#34;&gt;certResolver&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;cloudflare-resolver&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;h4 id=&#34;添加後端跟路由&#34;&gt;&lt;a href=&#34;#%e6%b7%bb%e5%8a%a0%e5%be%8c%e7%ab%af%e8%b7%9f%e8%b7%af%e7%94%b1&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;添加後端跟路由
&lt;/h4&gt;&lt;p&gt;添加 http service&lt;/p&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;toml code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; toml&lt;/span&gt;
    &lt;span  class=&#34;code-title&#34;&gt;📄 /etc/traefik/dynamic_configs/service.toml&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34; title=&#34;/etc/traefik/dynamic_configs/service.toml&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;gitea&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;loadBalancer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c&#34;&gt;# healthCheck 是讓 traefik 檢查 gitea 伺服器是否還活著，不要可以去掉&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;gitea&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;loadBalancer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;healthCheck&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;scheme&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;http&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;interval&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;10s&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;timeout&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;3s&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;gitea&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;loadBalancer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;servers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;url&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://gitea-ip:3000&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;p&gt;再來是添加 router&lt;/p&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;toml code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; toml&lt;/span&gt;
    &lt;span  class=&#34;code-title&#34;&gt;📄 /etc/traefik/dynamic_configs/routre.toml&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34; title=&#34;/etc/traefik/dynamic_configs/routre.toml&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;routers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;routers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;git&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;entryPoints&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;websecure&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;rule&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Host(`git.your.domain`)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;service&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;gitea&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;routers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;git&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nx&#34;&gt;certResolver&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;cloudflare-resolver&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;p&gt;這樣就完成了&lt;/p&gt;
&lt;h3 id=&#34;ssh&#34;&gt;&lt;a href=&#34;#ssh&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;ssh
&lt;/h3&gt;&lt;p&gt;git 使用 key 做身分認證時必須要走 ssh 的協定，如果要使用就必須做好轉發&lt;/p&gt;
&lt;p&gt;在 revers proxy 設定連接 就直接轉到 gitea 伺服器&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Gitea 使用 Gmail 寄信</title>
        <link>https://zonego.tw/post/gitea-gmail/</link>
        <pubDate>Sun, 14 Nov 2021 12:39:30 +0800</pubDate>
        
        <guid>https://zonego.tw/post/gitea-gmail/</guid>
        <description>&lt;img src="https://zonego.tw/post/gitea-gmail/mail.jpg" alt="Featured image of post Gitea 使用 Gmail 寄信" /&gt;&lt;h2 id=&#34;建立-gmail-應用程式密碼&#34;&gt;&lt;a href=&#34;#%e5%bb%ba%e7%ab%8b-gmail-%e6%87%89%e7%94%a8%e7%a8%8b%e5%bc%8f%e5%af%86%e7%a2%bc&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;建立 Gmail 應用程式密碼
&lt;/h2&gt;&lt;p&gt;Google 基於安全性，禁用直接用密碼存取 smtp&lt;br&gt;
取而代之要先建立應用程式密碼，代替原本密碼的功能&lt;/p&gt;
&lt;p&gt;管理 Google 帳戶 &amp;gt; 安全性 &amp;gt; 登入 Google &amp;gt; 應用程式密碼&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/gitea-gmail/google_account.jpg&#34;
	width=&#34;1919&#34;
	height=&#34;585&#34;
	srcset=&#34;https://zonego.tw/post/gitea-gmail/google_account_hu_93868852907d338a.jpg 480w, https://zonego.tw/post/gitea-gmail/google_account_hu_c6d31daa069a344f.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Google Account&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;328&#34;
		data-flex-basis=&#34;787px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;應用選郵件，裝置只是方便管理的名稱，可以選其他自己寫&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zonego.tw/post/gitea-gmail/google_appkey.jpg&#34;
	width=&#34;821&#34;
	height=&#34;661&#34;
	srcset=&#34;https://zonego.tw/post/gitea-gmail/google_appkey_hu_2fbc5dd2896018fd.jpg 480w, https://zonego.tw/post/gitea-gmail/google_appkey_hu_58d3dd947ef5b79e.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Google APP KEY&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;124&#34;
		data-flex-basis=&#34;298px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;完成後會產生一組密碼，建議用完之後就忘掉他，下次要用忘記時再建新的就好&lt;/p&gt;
&lt;h2 id=&#34;設定-container-環境變數&#34;&gt;&lt;a href=&#34;#%e8%a8%ad%e5%ae%9a-container-%e7%92%b0%e5%a2%83%e8%ae%8a%e6%95%b8&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;設定 container 環境變數
&lt;/h2&gt;&lt;p&gt;我的 gitea 是使用 Docker 架的&lt;/p&gt;
&lt;p&gt;gitea 官方鏡像有提供透過環境變數設定，不用另外修改設定檔&lt;/p&gt;
&lt;figure class=&#34;code-block&#34; role=&#34;figure&#34; aria-label=&#34;dockerfile code snippet&#34;&gt;

  &lt;div class=&#34;code-header&#34;&gt;
    &lt;span class=&#34;code-type&#34;&gt;&amp;lt;/&amp;gt; dockerfile&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-dockerfile&#34; data-lang=&#34;dockerfile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;env&lt;/span&gt;ironment:&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  - &lt;span class=&#34;nv&#34;&gt;GITEA__mailer__ENABLED&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;true&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  - &lt;span class=&#34;nv&#34;&gt;GITEA__mailer__FROM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;寄件者信箱&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  - &lt;span class=&#34;nv&#34;&gt;GITEA__mailer__MAILER_TYPE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;smtp&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  - &lt;span class=&#34;nv&#34;&gt;GITEA__mailer__HOST&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;smtp.gmail.com:465&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  - &lt;span class=&#34;nv&#34;&gt;GITEA__mailer__IS_TLS_ENABLED&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;true&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  - &lt;span class=&#34;nv&#34;&gt;GITEA__mailer__USER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;你的Gmail&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;  - &lt;span class=&#34;nv&#34;&gt;GITEA__mailer__PASSWD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;應用程式密碼&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/figure&gt;&lt;p&gt;改完之後到 Gitea 網站 &amp;gt; 網站管理 &amp;gt; 組態&lt;br&gt;
往下捲找到 SMTP 組態，可以測試寄信&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://docs.gitea.io/en-us/install-with-docker/#managing-deployments-with-environment-variables&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;詳細參考&lt;/a&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
